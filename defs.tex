\def\todo#1{{\color{numpexred}\textbf{TODO:} ``#1''}}
\def\hyperride{Exa-MA}
\def\exama{\ac{exama}\xspace}
\def\exasoft{\textsc{Exa-Soft}\xspace}
\def\exadost{\textsc{Exa-Dost}\xspace}
\def\exaatow{\textsc{Exa-Atow}\xspace}
\def\exadi{\textsc{Exa-DI}\xspace}
\def\numpex{NumPEx}
\def\Rplus{\protect\hspace{-0em}\protect\raisebox{.35ex}{{\smaller\textbf{+}}}}
\def\Cpp#1{\mbox{C\Rplus\Rplus#1}\xspace}
\def\feelpp{\ac{feelpp}\xspace}
\def\Feelpp{\mbox{Feel\Rplus\Rplus}\xspace}

\newcommand{\mathP}{\mathbb{P}}
\newcommand{\mathR}{\mathbb{R}}
\newcommand{\mathC}{\mathbb{C}}



% \barChart
% -----------
% A LaTeX macro to create a bar chart using the pgfplots package.
%
% Arguments:
%   #1 (optional): Options for the bar chart, defaults to 'ybar'.
%   #2 (required): The content or data for the bar chart.
%
% Usage:
%   \barChart[<options>]{<data>}
%
% Example:
%   \barChart[ybar,bar width=10pt]{\addplot coordinates {(A,1) (B,2)};}
\newcommand{\barChart}[2][ybar]{
  \begin{tikzpicture}
    \begin{axis}[
      %width=\textwidth, height=0.6172\textwidth,
      xlabel={Number of CPU core}, ylabel={Execution time [s]},
      %xticklabels from table={#2}{nProc},
      xtick=data,
      xtick align=outside,
      ymin=0,
      %legend style={at={(1,1)}, anchor=north east},
      %legend style={at={(0.5,1)}, anchor=south,font=\tiny,legend columns=-1},
      ymajorgrids=true, yminorgrids=true,
      bar width=7pt,
      #1
    ]
    \foreach [expand list=true] \thetuple in {#2} {
      \pgfkeys{/mysettings/.cd,
        table/.store in=\mytable,
        column/.store in=\mycolumn,
        shift/.store in=\myshift, shift/.default=0, shift,
        legend/.store in=\mylegend,
        color/.store in=\mycolor
      }
      \edef\temp{
        \noexpand\pgfkeys{/mysettings/.cd, \expandafter\@firstofone\thetuple}
      } \temp
      %\def\toto{\expandafter\mytable}
      \edef\temp{
        \noexpand\addplot[ybar, bar width=0.2, fill=\mycolor, draw=black, point meta=y]
        table [x expr=\noexpand\coordindex+\myshift, y=\mycolumn ] {\expandafter\noexpand\csname \mytable\endcsname};
        %table [x=nProc, y=\mycolumn ] {\expandafter\noexpand\csname \mytable\endcsname};
      } \temp
      %table [x expr=\noexpand\coordindex, y=\mycolumn ] {#2};
      \edef\temp{
        \noexpand\addlegendentry{\mylegend}
      } \temp
    }
    \end{axis}
\end{tikzpicture}
}


%%% START MACRO FOR ANNOTATION OF TRIANGLE WITH SLOPE %%%.
\newcommand{\logLogSlopeTriangle}[6][]
{
    % #1. Optional text to display after the slope value.
    % #2. Relative offset in x direction.
    % #3. Width in x direction, so xA-xB.
    % #4. Relative offset in y direction.
    % #5. Slope d(y)/d(log10(x)).
    % #6. Plot options.

    \pgfplotsextra
    {
        \pgfkeysgetvalue{/pgfplots/xmin}{\xmin}
        \pgfkeysgetvalue{/pgfplots/xmax}{\xmax}
        \pgfkeysgetvalue{/pgfplots/ymin}{\ymin}
        \pgfkeysgetvalue{/pgfplots/ymax}{\ymax}

        % Calculate auxiliary quantities, in relative sense.
        \pgfmathsetmacro{\xArel}{#2}
        \pgfmathsetmacro{\yArel}{#4}
        \pgfmathsetmacro{\xBrel}{#2-#3}
        \pgfmathsetmacro{\yBrel}{\yArel}
        \pgfmathsetmacro{\xCrel}{\xArel}

        \pgfmathsetmacro{\lnxB}{\xmin*(1-(#2-#3))+\xmax*(#2-#3)} % in [xmin,xmax].
        \pgfmathsetmacro{\lnxA}{\xmin*(1-#2)+\xmax*#2} % in [xmin,xmax].
        \pgfmathsetmacro{\lnyA}{\ymin*(1-#4)+\ymax*#4} % in [ymin,ymax].
        \pgfmathsetmacro{\lnyC}{\lnyA+#5*(\lnxA-\lnxB)}
        \pgfmathsetmacro{\yCrel}{(\lnyC-\ymin)/(\ymax-\ymin)} %

        % Define coordinates for \draw. MIND THE 'rel axis cs' as opposed to the 'axis cs'.
        \coordinate (A) at (rel axis cs:\xArel, \yArel);
        \coordinate (B) at (rel axis cs:\xBrel, \yBrel);
        \coordinate (C) at (rel axis cs:\xCrel, \yCrel);

        % Draw slope triangle.
        \draw[#6]   (A) -- % node[pos=0.5,anchor=north] {1}
                    (B) --
                    (C) -- node[pos=0.5, anchor=west] {\pgfmathprintnumber[precision=2]{#5} #1}
                    cycle;
    }
}
%%% END MACRO FOR ANNOTATION OF TRIANGLE WITH SLOPE %%%.