%!TEX root = ../../../exa-ma-d7.1.tex
\section{Software: \texorpdfstring{\Feelpp}{Feel++}}
\label{sec:WP5:Feelpp:software}

\begin{table}[!ht]
    \centering
    { \setlength{\parindent}{0pt}
    \def\arraystretch{1.25}
    \arrayrulecolor{numpexgray}
    {\fontsize{9}{11}\selectfont
    \begin{tabular}{!{\color{numpexgray}\vrule}p{.4\textwidth}!{\color{numpexgray}\vrule}p{.6\textwidth}!{\color{numpexgray}\vrule}}
        \rowcolor{numpexgray}{\rule{0pt}{2.5ex}\color{white}\bf Field} & {\rule{0pt}{2.5ex}\color{white}\bf Details} \\
        \rowcolor{white}\textbf{Consortium} & \begin{tabular}{l}
\Feelpp Consortium\\
\end{tabular} \\
        \rowcolor{numpexlightergray}\textbf{Exa-MA Partners} & \begin{tabular}{l}
CNRS\\
Inria Grenoble\\
Unistra\\
\end{tabular} \\
        \rowcolor{white}\textbf{Contact Emails} & \begin{tabular}{l}
christophe.prudhomme@cemosis.fr\\
vincent.chabannes@cemosis.fr\\
\end{tabular} \\
        \rowcolor{numpexlightergray}\textbf{Supported Architectures} & \begin{tabular}{l}
CPU Only\\
\end{tabular} \\
        \rowcolor{white}\textbf{Repository} & \href{https://github.com/feelpp/feelpp}{https://github.com/feelpp/feelpp} \\
        \rowcolor{numpexlightergray}\textbf{License} & \begin{tabular}{l}
OSS:: GPL v*\\
OSS:: LGPL v*\\
\end{tabular} \\
        \rowcolor{white}\textbf{Bottlenecks roadmap} & \begin{tabular}{l}
B10 - Scientific Productivity\\
B11 - Reproducibility and Replicability of Computation\\
B12 - Pre/Post Processing and In-Situ Processing\\
B2 - Interconnect Technology\\
B6 - Data Management\\
B7 - Exascale Algorithms\\
\end{tabular} \\
\rowcolor{numpexlightergray}\textbf{Contributors} & \begin{tabular}{l}
Christophe Prud'homme (UNISTRA)\\
Vincent Chabannes (UNISTRA)\\
Lucas Palazzolo (INRIA)\\
Yannick Privat (UL)
\end{tabular}\\
        \bottomrule
    \end{tabular}
    }}
    \caption{WP5: \Feelpp Information}
\end{table}

\subsection{Software Overview}
\label{sec:WP5:Feelpp:summary}

In~\cref{tab:WP5:Feelpp:features} we provide a summary of the software features relevant to the work package which are briefly discussed.

\begin{table}[!ht]
    \centering
    {
        \setlength{\parindent}{0pt}
        \def\arraystretch{1.25}
        \arrayrulecolor{numpexgray}
        {
            \fontsize{9}{11}\selectfont
            \begin{tabular}{!{\color{numpexgray}\vrule}p{.25\linewidth}!{\color{numpexgray}\vrule}p{.6885\linewidth}!{\color{numpexgray}\vrule}}

    \rowcolor{numpexgray}{\rule{0pt}{2.5ex}\color{white}\bf Features} &  {\rule{0pt}{2.5ex}\color{white}\bf Short Description }\\

\rowcolor{white}    Iterative methods: Shape Optimization & Iterative methods for shape optimization based on the work \cite{feppon_f_null_2020} have been implemented in \url{https://github.com/feelpp/feelpp-shapo} using \Feelpp toolboxes.\\
\end{tabular}
        }
    }
    \caption{WP5: \Feelpp Features}
    \label{tab:WP5:Feelpp:features}
\end{table}


\subsection{Parallel Capabilities}
\label{sec:WP5:Feelpp:performances}
 
The parallel properties are detailed in~\cref{sec:WP1:Feelpp:performances} since almost all the procedure depend on \Feelpp. 
However the mesh adaptation depend on MMG/ParMMG.

\subsection{Initial Performance Metrics}
\label{sec:WP5:Feelpp:metrics}

This section provides a summary of initial performance benchmarks performed in the context of WP5. It ensures reproducibility by detailing input/output datasets, benchmarking tools, and the results. All data should be publicly available, ideally with a DOI for future reference.

\begin{itemize}
    \item \textbf{Overall Performance:} Summarize the software's computational performance, energy efficiency, and scalability results across different architectures (e.g., CPU, GPU, hybrid systems).
    \item \textbf{Input/Output Dataset:} a json file containing the description of the shape optimization problem and a json and partition mesh file for each toolbox used in the optimization problem.
    \item \textbf{open-data Access:} the dataset is available at \url{https://github.com/feelpp/feelpp-shapo}
    \item \textbf{Challenges:} Robust scalable solution strategies for the different steps of the shape optimization problem. I/O and memory management are also critical.
    \item \textbf{Future Improvements:} Implement more efficient solution strategies for the shape optimization problem. Optimize I/O and memory management for large-scale simulations.
\end{itemize}

\subsubsection{Benchmark \#1 - Shape Optimization under Stokes Flow}

\paragraph{Description:} In \cite{palazzolo2023shape}, geometric shape optimization has been performed by using the Cea's method to compute the shape gradient \cite{cea_conception_1986}. The study employs iterative methods such as gradient descent and null-space methods \cite{feppon_f_null_2020}. The benchmark focuses on optimizing the shape of 2D and 3D objects under Stokes flow using these methods. Notably, in the 2D case, the optimized shape resembles a rugby ball \cite{pironneau_optimum_1974}. We use this testcase as we have a criteria for the reference solution for the shape optimization problem. We will investigate other problems in the future.

\paragraph{Benchmarking Tools Used:} The optimization problems are tackled using various \Feelpp toolboxes designed for solving the associated PDEs of the primal, adjoint, and extension problems.


\subsection{12-Month Roadmap}
\label{sec:WP5:Feelpp:roadmap}

In this section, describe the roadmap for improving benchmarks and addressing the challenges identified. This should include:
\begin{description}
    \item[Data Improvements] Proceed the same way as \cref{sec:WP1:Feelpp:metrics} to improve the dataset management.
    \item[Methodology Application] Implementation of the benchmarking methodology proposed in this deliverable to streamline reproducibility and dataset management.
    \item[Results Retention] Plans to maintain benchmark results in a publicly accessible repository with appropriate metadata and documentation, ensuring long-term usability.
\end{description}

In~\cref{tab:WP5:Feelpp:bottlenecks}, we briefly discuss the bottleneck roadmap associated to the software and relevant to the work package.

\begin{table}[!ht]
    \centering



    \centering
    {
        \setlength{\parindent}{0pt}
        \def\arraystretch{1.25}
        \arrayrulecolor{numpexgray}
        {
            \fontsize{9}{11}\selectfont
            \begin{tabular}{!{\color{numpexgray}\vrule}p{.25\linewidth}!{\color{numpexgray}\vrule}p{.6885\linewidth}!{\color{numpexgray}\vrule}}

    \rowcolor{numpexgray}{\rule{0pt}{2.5ex}\color{white}\bf Bottlenecks} &  {\rule{0pt}{2.5ex}\color{white}\bf Short Description }\\

\rowcolor{white}    B10 - Scientific Productivity & Same as~\cref{sec:WP1:Feelpp:roadmap}\\
\rowcolor{numpexlightergray}    B11 - Reproducibility and Replicability of Computation & Same as~\cref{sec:WP1:Feelpp:roadmap} \\
\rowcolor{white}    B12 - Pre/Post Processing and In-Situ Processing & Same as~\cref{sec:WP1:Feelpp:roadmap}; reduce I/O load and enable checkpoint restart strategies \\
\rowcolor{numpexlightergray}    B2 - Interconnect Technology & Same as~\cref{sec:WP1:Feelpp:roadmap} \\
\rowcolor{white}    B6 - Data Management & Same as~\cref{sec:WP1:Feelpp:roadmap}  \\
\rowcolor{numpexlightergray}    B7 - Exascale Algorithms & Enable efficient Shape Optimization Benchmarking; define new benchmark with reference solutions; work on multiphysic shape optimisation; \\
\end{tabular}
        }
    }
    \caption{WP5: \Feelpp plan with Respect to Relevant Bottlenecks}
    \label{tab:WP5:Feelpp:bottlenecks}
\end{table}